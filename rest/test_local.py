import sys
import json
import urllib
import urllib2

port = sys.argv[1] if len(sys.argv) >= 2 else '51377'
url = sys.argv[2] if len(sys.argv) >= 3 else 'gqrest/fisher/search_sorted'

params = {
   'species': 'mm',
   'genes': '14081 14469 229898 229900 16145 12182 60440 19225 224796 12702 16169 56619 16176 17329 21939 19124 16181 99899 17472 21825 16068 58185 20555 18126 20304 15953 11988 15957 15958 58203 215900 100702 100038882 231655 54396 12266 20715 12524 16365 16362 20210 20723 100039796 60533 110454 108116 11898 55932 12494',
}

params = {
    'species': 'hs',
    'genes': '2180 81030 730249 91543 26253 6542 7057 163351 5272 5743 53405 115361 115362 9636 388646 683 942 10544 952 4283 9021 958 441168 10561 3659 29126 28232 2634 2635 718 6352 10068 3553 3557 3601 3433 3434 4843 445',
}

# With -INF
params = {
    'species': 'mm',
    'genes': '268288 57344 227331 319493 268294 18439 268297 67596 14185 110612 434197 73750 67608 319513 208922 20509 71710 57376 71715 16421 71718 231464 102442 329777 626583 14390 16440 22589 213054 22594 16451 229445 208968 18507 12366 98386 20568 219151 98396 19130 57440 229473 73828 54630 69740 209011 100503670 100503572 20603 16510 14357 71810 19819 381062 18569 16523 20621 108687 69780 18583 215193 381085 215201 22690 381091 229541 72049 22698 110763 18605 18606 665775 329908 16565 69816 12478 12479 22720 110785 110786 12483 434377 215243 30925 211151 100561 67619 12504 231642 67803 217310 18655 14561 70012 12522 209131 18675 243958 76025 14586 22780 69893 545030 69895 217356 319758 106200 192786 18707 104725 102680 227612 108829 71968 71974 76071 14632 67881 106794 381232 12593 74034 327987 71989 317750 76088 67897 212880 14651 227644 317758 12607 12000 100678 319817 18768 18769 217827 76117 246102 14680 19720 230459 213350 21357 18796 20845 14702 74096 65256 53618 414068 74105 432508 14723 20868 22722 319885 231834 72093 74143 70052 209318 70059 18861 207278 78255 27057 215474 68339 74164 12727 20922 66293 20928 72129 387524 74182 56737 74192 20947 246228 223701 408022 216825 215512 72154 76251 170460 27103 106633 209378 20963 209380 12775 170472 72171 57837 16882 279029 677289 109652 231931 231932 319997 12799 12801 12802 233987 320007 432649 12497 68108 627214 244141 74256 12818 100861855 74841 14872 780825 65967 780829 66645 53791 18985 18986 240174 57905 57908 14904 109113 57916 102636093 70208 100929 73825 242248 16970 74315 78416 105450 217682 102640212 234069 27223 227929 70237 72287 74337 16994 12902 12912 19057 229499 320116 225912 72313 213439 74364 17022 98752 780932 76422 330361 328329 229227 56429 74385 19090 15000 15001 15002 240283 66206 68260 242341 70314 17068 240754 66222 72368 328370 17076 227102 102637787 53945 242362 109245 244853 72388 19142 66679 100043468 13006 64209 170707 19157 109270 13018 66682 330192 545506 100504291 22248 15078 100043495 70377 66286 102640368 319955 78581 546071 68971 74493 74197 232196 67030 215814 232201 19211 27405 320271 232210 170772 13078 213783 70425 105245 105246 17193 320299 66349 213811 74551 12767 72508 668478 381760 100043585 72522 170829 13139 68436 668501 19286 381783 230233 17242 72542 19296 15204 100504421 80743 193385 54122 54125 238447 330096 58226 103284 101240 100038804 234362 13179 56190 15235 66369 70546 74645 56215 21400 17308 21406 21411 19364 252838 21423 21425 60345 64453 269254 56264 252876 68770 78798 72655 66514 105428 232406 19415 66387 105439 56292 320489 78826 80877 74734 449521 100503379 66549 236539 100043772 68778 66559 74753 228012 76804 100504581 66049 76809 79362 80911 80913 234515 66583 67759 100504604 217946 78878 56354 252966 11303 320556 76846 320560 545847 13368 545851 236604 75957 17248 68675 72774 11766 236727 98488 54354 56403 70551 67755 240726 103268 191578 214111 93712 76899 12458 320616 13417 70762 54380 13421 16541 216177 101490 67774 434025 54394 56504 629884 404711 225131 70789 654470 228491 12482 97423 545938 110787 74901 330902 231279 100502686 171170 67099 76967 100502698 171207 21677 54447 21682 54451 60599 100039864 54132 56515 211652 234695 271564 56526 12493 228564 56535 13528 102632669 433375 101602 380795 101604 27878 232679 234728 23792 70829 623859 210104 320760 320761 23806 52480 69602 68867 100775174 404743 245000 320782 245007 19730 17686 13591 52504 19737 208154 70945 54563 140580 20017 329002 666926 23856 11569 73010 77110 666938 66783 68925 23871 240960 75659 619846 107746 21841 21848 27993 226652 30046 232801 13666 17766 70430 28010 101739 19821 23918 666173 13682 20371 100416885 12521 100038548 234875 56213 630146 30955 28040 69527 53374 17304 214425 109978 23965 77040 17847 21926 56220 94109 777648 224840 241075 777654 19895 777656 226747 54722 56772 225913 70086 28109 83408 17876 56790 71929 56792 69882 69085 19934 56175 228839 217340 93675 27218 321006 620017 69106 108022 69113 321019 93697 216578 105244168 105246217 232970 102635019 22029 98221 228880 22033 67091 114128 14255 67102 71941 67105 67106 108067 67109 66481 13871 69169 214580 102635071 105246278 210503 243272 108105 20044 67154 110168 11920 69221 18018 18021 100504591 271981 77422 14269 15985 20088 20091 73341 67200 228993 218756 20102 245386 67211 667280 16017 59026 16019 50798 75415 382620 100503199 18082 692165 269614 243374 100637 52915 74322 231093 102637239 192188 210622 67266 16069 16071 218832 67282 67283 57294 20182 239319 216792 20185 16016 243420 331487 622304 192232 104175 227624 14069 18166 212728 70612 216829 269952 218885 20230 67338 12043 16142 26385 102162 216853 227094 69399 71449 227099 319262 26401 319266 26405 102182 26411 216877 74035 13496 26429 77634 100038467 16197 16199 16205 26447 667619 100182 94043 67422 22367 100038497 26939 106344 100201 634731 12142 12143 20338 18751 14204 380797 20352 94089 94091 94093 100043757 219024 67475 214932 380823 104349 231327 77733 14247 69544 67228 57258 67501 235439 67510 71330 14264 233405 26561 26563 239556 12229 16328 692169 72149 75725 217038 20431 73683 67542 20440 17060 100038626 75747 20452 18406 16364 14007 67580 272382',
}

# params = {
#     'species': 'mm',
#     'genes': '18720 100502613 100043255 595141 14550'
# }
final_url = 'http://localhost:{}/{}?{}'.format(port, url, urllib.urlencode(params))
print "Open", final_url
#data = [x.strip().split('\t') for x in urllib2.urlopen(final_url).readlines()]
s = urllib2.urlopen(final_url).read()
print s
data = json.loads(s)
print json.dumps(data[:30], indent=2)
